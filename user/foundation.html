

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Foundation &mdash; SimplePie: User and Developer Guide</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.7/segment.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.7/menu.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="SimplePie: User and Developer Guide" href="../index.html"/>
        <link rel="next" title="Configuration" href="configuration.html"/>
        <link rel="prev" title="SimplePie NG" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> SimplePie NG
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Foundation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lies-damned-lies-and-statistics">Lies, damned lies, and statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json">JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="#domdocument">DOMDocument</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xpath">XPath</a></li>
<li class="toctree-l2"><a class="reference internal" href="#decoupled-components">Decoupled Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#middleware">Middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standards">Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#doing-less">Doing Less</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coding-standards">Coding Standards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#design-of-the-configuration-system">Design of the Configuration System</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#logger">Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#middleware">Middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#libxml">libxml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License: Why Apache 2.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#short-and-permissive">Short and Permissive</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#gpl-lgpl-agpl-and-free-software">GPL, LGPL, AGPL, and “Free Software”</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#so-why-apache-2-0">So, why Apache 2.0?</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ref/api-reference.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer/start.html">Getting Started (Draft)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/start.html#php-dependencies">PHP Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/testing.html">Unit and Integration Testing (Draft)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing.html#integration-test-schema">Integration Test Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing.html#all-at-once">All at Once</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SimplePie NG</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Foundation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user/foundation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="foundation">
<h1>Foundation<a class="headerlink" href="#foundation" title="Permalink to this headline">¶</a></h1>
<p>There are some core technology and design pattern choices which are foundational to SimplePie NG and how it has been
built. Many of these decisions are based on lessons working with XML-based feeds being fetched over HTTP and cached.</p>
<div class="section" id="lies-damned-lies-and-statistics">
<h2>Lies, damned lies, and statistics<a class="headerlink" href="#lies-damned-lies-and-statistics" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://trakt.tv/shows/house">Dr.&nbsp;House says that everybody lies</a>. He’s not wrong.</p>
<p>You know what else lies? Feeds. Web servers. Character encodings. Proxied HTTP requests. And pretty much everything else
that drives feed syndication across the web.</p>
<p>Back in 2004, we learned this the hard way. I was cutting my teeth on PHP, XML, and RSS, and I learned that these things
are nothing but liars. As a matter of fact, at one point Geoffrey and I estimated that over 70% of all RSS feeds were
invalid XML. As a result, a tremendous percentage of code in the original SimplePie is designed for handling lies.</p>
<p>It wasn’t until the <a class="reference external" href="http://blog.birdhouse.org/2007/07/05/go-php5/">Go-PHP5 initiative</a> in 2007-2008 that we put our
efforts into leaving behind PHP 4.3 and making PHP 5 a first-class citizen. Not only was PHP 5 more performant, but it
also included niceties like <code class="docutils literal"><span class="pre">iconv</span></code> and <code class="docutils literal"><span class="pre">DOMDocument</span></code> out of the box. Unfortunately, we were targeting mostly shared
hosting plans at that time, and needed to rely on <code class="docutils literal"><span class="pre">XMLReader</span></code> and other low-level XML parsing tools.</p>
<p>Now that we’re targeting current versions of PHP, we can take advantage of some of the more powerful improvements in
PHP.</p>
</div>
<div class="section" id="json">
<h2>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h2>
<p>For the first time, SimplePie NG is expected to support the ability to query JSON documents. This is largely to support
the new <a class="reference external" href="https://jsonfeed.org">JSON Feed</a> specification, but also opens the doors to support other formats which
translate nicely into associative arrays such as a theoretical YAML serialization of JSON Feed.</p>
<p><a class="reference external" href="https://wiki.php.net/rfc/jsond">JSON-D</a> in PHP 7 is faster than the previous JSON-C, and from the very beginning
we’re thinking about how to support non-XML feed formats.</p>
</div>
<div class="section" id="domdocument">
<h2>DOMDocument<a class="headerlink" href="#domdocument" title="Permalink to this headline">¶</a></h2>
<p>PHP’s <a class="reference external" href="http://php.net/DOMDocument">DOMDocument</a> class is really excellent at parsing malformed XML. It understands
things like CDATA blocks, doesn’t explode when encountering HTML entities which aren’t defined in XML, and has a lot of
flexibility. It leverages <code class="docutils literal"><span class="pre">libxml2</span></code> under the hood, and has a much richer set of parsing tools in its toolbox compared
to <code class="docutils literal"><span class="pre">SimpleXML</span></code>.</p>
</div>
<div class="section" id="xpath">
<h2>XPath<a class="headerlink" href="#xpath" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://www.w3.org/TR/xpath/">XPath</a> is a method of querying XML documents for selected bits of data. In some
informal tests, I have benchmarked XPath performing over <em>100 times faster</em> than iterating over the same XML efficiently
in PHP. PHP’s XPath implementation is highly-tuned for performance, and is the primary way that the built-in XML
middleware is authored.</p>
<p>PHP’s <a class="reference external" href="http://php.net/manual/en/class.domxpath.php">XPath implementation</a> only supports XPath 1.0, though, so keep
this in mind.</p>
</div>
<div class="section" id="decoupled-components">
<h2>Decoupled Components<a class="headerlink" href="#decoupled-components" title="Permalink to this headline">¶</a></h2>
<p>Before we knew what dependency injection was, SimplePie offered a wide set of injection points which leveraged
<a class="reference external" href="https://stackoverflow.com/questions/4578335/creating-php-class-instance-with-a-string">instantiating PHP classes by their string
names</a>. But despite our best
efforts, there was still a lot of tight coupling happening.</p>
<p>SimplePie NG strongly adopts the dependency injection pattern and inversion of control, and encourages the use of PSR-11
containers for re-using complex sets of dependencies. All of this is balanced, however, with support for global settings
such as your preferred logger.</p>
</div>
<div class="section" id="middleware">
<h2>Middleware<a class="headerlink" href="#middleware" title="Permalink to this headline">¶</a></h2>
<p>At one point I thought that events was going to be the way to move forward, with things happening in the system and
plugins could subscribe to those events. But with middleware coming out as the way to do stuff in HTTP
post-<a class="reference external" href="http://www.php-fig.org/psr/psr-7/">PSR-7</a>, I realized that it was a better way to go. So that’s how I’m
building things — each specification that we want to support will come by way of middleware.</p>
<p>There is currently a <a class="reference external" href="https://github.com/php-fig/fig-standards/tree/master/proposed/http-middleware">PSR-15</a> draft
that talks about HTTP middleware (which this is not), but it borrows ideas from there and from Guzzle 6 middleware.</p>
<p>Keep an eye on the README for development status, but the plan is to do Atom 1.0 first, with other formats coming later.</p>
</div>
<div class="section" id="standards">
<h2>Standards<a class="headerlink" href="#standards" title="Permalink to this headline">¶</a></h2>
<p>Since the advent of the PHP-FIG and the <a class="reference external" href="http://www.php-fig.org/psr/">PSR system</a>, things that were once left
entirely to the developer have now been specified in documents with numbers on them. This enables more people to put
“more wood behind fewer arrows”, to use an idiom.</p>
<p>Where it makes sense, SimplePie NG will take advantage of off-the-shelf building blocks implementing various PSR
specifications. This will allow components to become <em>pluggable</em>, and make it easier to use SimplePie in your modern PHP
apps without duplicating functionality or imposing a steep learning curve.</p>
</div>
<div class="section" id="doing-less">
<h2>Doing Less<a class="headerlink" href="#doing-less" title="Permalink to this headline">¶</a></h2>
<p>SimplePie focused so hard on being easy enough for mindless non-developers to use, that it had difficulty addressing the
issues facing power-users.</p>
<p>It had built-in XML parsing, feed sanitization, HTTP support, caching support, favicon-fetching support, integration
with posting content to a number of long-dead services, native Odeo support, and tried to do some clever things that
ended up opening security holes. Some people would disable networking caching, causing SimplePie to pummel websites with
requests, and would sometimes even knock them offline! I even had one person track down where I was working and threaten
my life and the lives of the people I love because someone was misusing SimplePie, and he accused me personally!</p>
<p>SimplePie NG aims to do less. Far less. We’re starting with parsing feeds into a data structure. These feeds are
expected to be UTF-8. That’s it.</p>
<p>We may provide some convenience methods for simplifying PSR-6/PSR-16 caching, PSR-7 HTTP requests, PSR-11 container
interop, or tools for converting between character encodings, but those will come later. First, let’s get parsing right.</p>
</div>
<div class="section" id="coding-standards">
<h2>Coding Standards<a class="headerlink" href="#coding-standards" title="Permalink to this headline">¶</a></h2>
<p>PSR-1/2/12 are a solid foundation, but are not an entire coding style by themselves. I have taken the time to document
all of the nitpicky patterns and nuances of my personal coding style. It goes well-beyond brace placement and tabs
vs.&nbsp;spaces to cover topics such as docblock annotations, ternary operations and which variation of English to use. It
aims for thoroughness and pedanticism over hoping that we can all get along.</p>
<p><a class="reference external" href="https://github.com/skyzyx/php-coding-standards">https://github.com/skyzyx/php-coding-standards</a></p>
<div class="reviewed admonition">
<p class="first admonition-title">Review</p>
<p class="last">Written on 2017-06-25, proofread on 2017-06-30.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="SimplePie NG" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Ryan Parman.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/sphinx_tabs/tabs.js"></script>
      <script type="text/javascript" src="../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>